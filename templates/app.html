<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Pocket pro</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
<!-- –í–°–ü–õ–´–í–ê–Æ–©–ò–ô –° –°–û–í–ï–¢–û–ú -->
<div id="pro-tip-overlay" class="overlay-view">
    <div class="card pro-tip-card">
        <h2 class="subtitle" data-translate-key="pro_tip_title"></h2>
        <p class="description" data-translate-key="pro_tip_desc"></p>
        <button class="main-button" id="btn-pro-tip-ok" data-translate-key="pro_tip_btn"></button>
    </div>
</div>
<div id="notification-toast" class="notification-toast"></div>
<div class="app-wrapper">

    <!-- –≠–ö–†–ê–ù 0: –ó–ê–ì–†–£–ó–ö–ê -->
    <div id="loader-view" class="view active"><div class="card"><div class="spinner"></div><p data-translate-key="loading"></p></div></div>
    
    <!-- –≠–ö–†–ê–ù 0.1: –û–®–ò–ë–ö–ê -->
    <div id="error-view" class="view"><div class="card"><p data-translate-key="error_text"></p></div></div>

    <!-- –ë–õ–û–ö 1: –û–ù–ë–û–†–î–ò–ù–ì -->
    <div id="onboarding-1-view" class="view"><div class="card"><h1 class="custom-header">PRO MAX TRAIDING SIGNAL BOT</h1><p class="version-tag">v.5.0</p><p class="ai-users-text" data-translate-key="onb1_ai_users"></p><div class="stats-container"><div class="stat-item"><div class="value">30 000+</div><div class="label" data-translate-key="onb1_stat_users"></div></div><div class="stat-item"><div class="value">+$7M</div><div class="label" data-translate-key="onb1_stat_earned"></div></div><div class="stat-item"><div class="value">TOP 1</div><div class="label" data-translate-key="onb1_stat_recommended"></div></div></div><div class="nav-buttons full-width"><button class="main-button" id="btn-onb1-next" data-translate-key="next_btn"></button></div></div></div>
    <div id="onboarding-2-view" class="view"><div class="card"><h1 class="tutorial-title" data-translate-key="tutorial_title"></h1><div class="tutorial-blocks"><div class="tutorial-block"><div class="number-circle">1</div><p data-translate-key="tutorial_b1"></p></div><div class="tutorial-block"><div class="number-circle">2</div><p data-translate-key="tutorial_b2"></p></div><div class="tutorial-block"><div class="number-circle">3</div><p data-translate-key="tutorial_b3"></p></div><div class="tutorial-block"><div class="number-circle">4</div><p data-translate-key="tutorial_b4"></p></div></div><div class="nav-buttons"><button class="back-button" id="btn-tutorial-back" data-translate-key="back_btn"></button><button class="main-button" id="btn-tutorial-ready" data-translate-key="tutorial_ready_btn"></button></div></div></div>
    <div id="onboarding-3-view" class="view"><div class="card"><p class="step-label" data-translate-key="step1_label"></p><h1 class="roman-numeral">I</h1><h2 class="step-title" data-translate-key="step1_title"></h2><div class="side-note"><p data-translate-key="step1_side_note"></p></div><div class="nav-buttons-vertical"><button class="main-button" id="btn-step1-register" data-translate-key="step1_btn_register"></button><button class="secondary-button" id="btn-step1-how-to" data-translate-key="how_to_register_btn"></button><button class="secondary-button" id="btn-step1-have-account" data-translate-key="have_account_btn"></button></div><div class="nav-buttons"><button class="back-button" id="btn-step1-back" data-translate-key="back_btn"></button></div></div></div>
    
    <!-- –≠–ö–†–ê–ù: –ö–ê–ö –ó–ê–†–ï–ì–ò–°–¢–†–ò–†–û–í–ê–¢–¨–°–Ø -->
    <div id="how-to-register-view" class="view"><div class="card"><h1 class="title" data-translate-key="how_to_reg_title"></h1><p class="description" data-translate-key="how_to_reg_subtitle"></p><ol class="instruction-list"><li><span data-translate-key="how_to_reg_s1"></span><button class="main-button" id="btn-how-to-reg-link" data-translate-key="how_to_reg_s1_btn"></button></li><li data-translate-key="how_to_reg_s2"></li><li data-translate-key="how_to_reg_s3"></li><li data-translate-key="how_to_reg_s4"></li><li data-translate-key="how_to_reg_s5"></li></ol><p class="video-placeholder" data-translate-key="how_to_reg_video"></p><div class="nav-buttons"><button class="back-button" id="btn-how-to-reg-back" data-translate-key="back_btn"></button></div></div></div>

    <!-- –°–¶–ï–ù–ê–†–ò–ô "–£–ñ–ï –ï–°–¢–¨ –ê–ö–ö–ê–£–ù–¢" -->
    <div id="real-money-check-view" class="view"><div class="card"><h1 class="title" data-translate-key="real_money_q"></h1><div class="nav-buttons-vertical"><button class="main-button" id="btn-real-money-yes" data-translate-key="yes_btn"></button><button class="secondary-button" id="btn-real-money-no" data-translate-key="no_btn"></button></div><div class="nav-buttons"><button class="back-button" id="btn-real-money-back" data-translate-key="back_btn"></button></div></div></div>
    <div id="new-account-flow-view" class="view"><div class="card"><h1 class="title" data-translate-key="new_acc_flow_title"></h1><p class="description" data-translate-key="new_acc_flow_subtitle"></p><div class="flow-step"><div class="step-content"><span class="step-number">1</span><p data-translate-key="new_acc_flow_step1"></p></div><button class="secondary-button" id="btn-how-and-why-delete" data-translate-key="new_acc_flow_btn1"></button></div><div class="flow-step"><div class="step-content"><span class="step-number">2</span><p data-translate-key="new_acc_flow_step2"></p></div><button class="main-button" id="btn-new-acc-register" data-translate-key="step1_btn_register"></button></div><div class="important-note" data-translate-key="new_acc_flow_note"></div><div class="nav-buttons"><button class="back-button" id="btn-new-acc-back" data-translate-key="back_btn"></button></div></div></div>
    <div id="how-to-delete-view" class="view"><div class="card"><h1 class="title" data-translate-key="how_to_del_title"></h1><ul class="delete-guide"><li data-translate-key="how_to_del_s1"></li><li data-translate-key="how_to_del_s2"></li><li data-translate-key="how_to_del_s3"></li><li data-translate-key="how_to_del_s4"></li><li data-translate-key="how_to_del_s5"></li></ul><div class="video-placeholder" data-translate-key="how_to_del_video_placeholder"></div><div class="nav-buttons"><button class="back-button" id="btn-delete-guide-back" data-translate-key="back_btn"></button></div></div></div>
    <div id="have-money-options-view" class="view"><div class="card"><h1 class="title" data-translate-key="have_money_title"></h1><p class="description" data-translate-key="have_money_subtitle"></p><div class="flow-step"><div class="step-content"><span class="step-number">1</span><p data-translate-key="have_money_opt1"></p></div><button class="secondary-button" id="btn-how-to-withdraw" data-translate-key="have_money_btn1"></button></div><div class="flow-step"><div class="step-content"><span class="step-number">2</span><p data-translate-key="have_money_opt2"></p></div><button class="main-button" id="btn-register-for-friend" data-translate-key="step1_btn_register"></button></div><div class="flow-step"><div class="step-content"><span class="step-number">3</span><p data-translate-key="have_money_opt3"></p></div><button class="secondary-button question-btn" id="btn-risk-what" data-translate-key="have_money_btn3"></button></div><div class="nav-buttons"><button class="back-button" id="btn-options-back" data-translate-key="back_btn"></button></div></div></div>
    <div id="risk-info-view" class="view"><div class="card"><p class="risk-info-text" data-translate-key="risk_info_text"></p><div class="nav-buttons"><button class="back-button" id="btn-risk-info-back" data-translate-key="back_btn"></button></div></div></div>
    
    <!-- –≠–ö–†–ê–ù –ü–û–°–õ–ï –†–ï–ì–ò–°–¢–†–ê–¶–ò–ò -->
    <div id="reg-success-view" class="view"><div class="card"><p class="success-emoji">‚úÖ</p><h1 class="title" data-translate-key="reg_success_title"></h1><p class="description" data-translate-key="reg_success_desc"></p><div class="nav-buttons full-width"><button class="main-button" id="btn-reg-success-next" data-translate-key="next_btn"></button></div></div></div>
    
    <!-- –≠–ö–†–ê–ù –î–ï–ü–û–ó–ò–¢–ê -->
    <div id="post-reg-view" class="view"><div class="card"><h1 class="step2-title" data-translate-key="step2_title"></h1><p class="description" data-translate-key="step2_subtitle"></p><div class="strategy-section"><div class="strategy-bubble" data-translate-key="step2_strategy_bubble"></div><div class="strategy-choices"><div class="strategy-card risk-on"><h3><span class="toggle on"></span><span data-translate-key="strat1_title"></span></h3><ul><li data-translate-key="strat1_li1"></li><li data-translate-key="strat1_li2"></li><li data-translate-key="strat1_li3"></li></ul></div><div class="strategy-card risk-off"><h3><span class="toggle off"></span><span data-translate-key="strat2_title"></span></h3><ul><li data-translate-key="strat2_li1"></li><li data-translate-key="strat2_li2"></li><li data-translate-key="strat2_li3"></li></ul></div></div></div><div class="nav-buttons-vertical"><button class="main-button" id="btn-make-deposit" data-translate-key="step2_btn_deposit"></button><button class="secondary-button" id="btn-how-to-deposit" data-translate-key="how_to_deposit_btn"></button></div></div></div>
    <div id="how-to-deposit-view" class="view"><div class="card"><p class="description" data-translate-key="how_to_deposit_text"></p><div class="nav-buttons"><button class="back-button" id="btn-how-to-deposit-back" data-translate-key="back_btn"></button></div></div></div>

    <!-- –ë–õ–û–ö 3: –ü–û–°–õ–ï –î–ï–ü–û–ó–ò–¢–ê (–õ–û–ë–ë–ò) -->
    <div id="post-deposit-view" class="view"><div class="card"><h1 class="lobby-title" data-translate-key="lobby_title"></h1><p class="description" data-translate-key="lobby_congrats"></p><div class="deposit-display"><div class="deposit-amount" id="deposit-amount-display"></div></div><p class="small-text" data-translate-key="lobby_footnote"></p><div class="nav-buttons-vertical"><button class="secondary-button" id="btn-goto-profile" data-translate-key="lobby_btn_profile"></button></div></div></div>
    
    <!-- –≠–ö–†–ê–ù –ü–†–û–§–ò–õ–Ø –¢–†–ï–ô–î–ï–†–ê -->
    <!-- –≠–ö–†–ê–ù –ü–†–û–§–ò–õ–Ø –¢–†–ï–ô–î–ï–†–ê -->
    <!-- –≠–ö–†–ê–ù –ü–†–û–§–ò–õ–Ø –¢–†–ï–ô–î–ï–†–ê -->
    <!-- –≠–ö–†–ê–ù –ü–†–û–§–ò–õ–Ø –¢–†–ï–ô–î–ï–†–ê -->
    <div id="trader-profile-view" class="view">
        <div class="card">
            <h1 class="title" data-translate-key="profile_title"></h1>
            <ul class="profile-info-list">
                <li class="profile-info-item"><span class="label" data-translate-key="profile_nickname"></span><span class="value" id="profile-nickname-val"></span></li>
                <li class="profile-info-item"><span class="label" data-translate-key="profile_name"></span><span class="value" id="profile-name-val"></span></li>
                <li class="profile-info-item"><span class="label" data-translate-key="profile_about"></span><span class="value" id="profile-about-val"></span></li>
                <li class="profile-info-item"><span class="label" data-translate-key="profile_balance"></span><span class="value" id="profile-balance-val"></span></li>
                <li class="profile-info-item"><span class="label" data-translate-key="profile_rank"></span><span class="value"><span data-translate-key="rank_novice"></span><span class="rank-toggle" id="rank-toggle-btn">‚Ä∫</span></span></li>
            </ul>
            <div id="rank-details" style="display: none;">
                <div class="rank-details">
                    <p><span data-translate-key="rank_detail_vip"></span>: 0</p>
                    <p><span data-translate-key="rank_detail_days"></span>: <span id="days-since-reg">0</span></p>
                    <p><span data-translate-key="rank_detail_maxdep"></span>: <span id="max-deposit-val">$0.00</span> (<span data-translate-key="rank_detail_maxdep_note"></span>)</p>
                </div>
            </div>
            <div class="nav-buttons-vertical profile-actions">
                <button class="main-button" id="btn-trade-free" data-translate-key="profile_btn_trade_free"></button>
                <button class="secondary-button" id="btn-rating" data-translate-key="profile_btn_rating"></button>
                <button class="secondary-button" id="btn-trade-vip" data-translate-key="profile_btn_trade_vip"></button>
                <button class="secondary-button" id="btn-help" data-translate-key="profile_btn_help"></button>
                <button class="secondary-button" id="btn-promocodes" data-translate-key="profile_btn_promocodes"></button>
            </div>
            <div class="nav-buttons">
                <button class="back-button" id="btn-profile-back" data-translate-key="back_btn"></button>
            </div>
        </div>
    </div>
        
        <!-- –ù–û–í–´–ô –ë–õ–û–ö: –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ä–∞–Ω–≥–æ–≤ -->
                    <ul class="ranks-info-list">
                        <li><b>Strategist:</b> $1 - $399</li>
                        <li><b>Royal:</b> $400 - $999</li>
                        <li><b>Hero:</b> $1000 - $4999</li>
                        <li><b>Nova:</b> $5000 - $19999</li>
                        <li><b>Legend:</b> $20000+</li>
                    </ul>
                </div>
            </div>
           
            <div class="nav-buttons-vertical profile-actions">
                <button class="main-button" id="btn-trade-free" data-translate-key="profile_btn_trade_free"></button>
                <button class="secondary-button" id="btn-rating" data-translate-key="profile_btn_rating"></button>
                <button class="secondary-button" id="btn-trade-vip" data-translate-key="profile_btn_trade_vip"></button>
                <button class="secondary-button" id="btn-help" data-translate-key="profile_btn_help"></button>
                <button class="secondary-button" id="btn-promocodes" data-translate-key="profile_btn_promocodes"></button>
            </div>
            <div class="nav-buttons">
                <button class="back-button" id="btn-profile-back" data-translate-key="back_btn"></button>
            </div>
        </div>
    </div>


    <!-- –ù–û–í–´–ô –≠–ö–†–ê–ù: –†–ï–ô–¢–ò–ù–ì -->
    <div id="rating-view" class="view">
        <div class="card">
            <h1 class="title" data-translate-key="rating_title"></h1>
            <ul class="rating-list" id="rating-list-container">
                <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è JS -->
            </ul>
            <div class="nav-buttons">
                <button class="back-button" id="btn-rating-back" data-translate-key="back_btn"></button>
            </div>
        </div>
    </div>
    <!-- –≠–ö–†–ê–ù –ü–†–û–ú–û–ö–û–î–û–í -->
    <div id="promocodes-view" class="view"><div class="card"><h1 class="title" data-translate-key="promocode_title"></h1><ul class="promocode-list"><li class="promocode-item"><span class="text">+50% –æ—Ç $50 <span class="arrow">‚Ä∫</span></span><span class="code">WXL727</span></li><li class="promocode-item"><span class="text">+60% –æ—Ç $500 <span class="arrow">‚Ä∫</span></span><span class="code">ONB511</span></li><li class="promocode-item"><span class="text">+60% –æ—Ç $1000 <span class="arrow">‚Ä∫</span></span><span class="code">HFB504</span></li></ul><div class="nav-buttons"><button class="back-button" id="btn-promocodes-back" data-translate-key="back_btn"></button></div></div></div>
    
    <!-- –≠–ö–†–ê–ù –°–¢–ê–†–¢–ê –ë–ï–°–ü–õ–ê–¢–ù–û–ì–û –°–ò–ì–ù–ê–õ–ê -->
    <div id="free-signal-start-view" class="view">
        <div class="card">
            <h1 class="title" data-translate-key="free_signal_title"></h1>
            <p class="description" id="free-signal-text"></p>
            <!-- –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ó–î–ï–°–¨ -->
            <div class="nav-buttons">
                 <button class="back-button" id="btn-free-signal-back" data-translate-key="back_btn"></button>
                 <button class="main-button" id="btn-free-signal-start" data-translate-key="start_btn"></button>
            </div>
        </div>
    </div>

    <!-- –≠–ö–†–ê–ù –ê–ù–ê–õ–ò–ó–ê –ü–†–û–ò–ì–†–´–®–ê -->
    <div id="loss-analysis-view" class="view"><div class="card"><h1 class="title" data-translate-key="loss_analysis_title"></h1><p class="description" data-translate-key="loss_analysis_subtitle"></p><ol class="loss-analysis-list"><li data-translate-key="loss_reason1"></li><li data-translate-key="loss_reason2"></li><li data-translate-key="loss_reason3"></li><li data-translate-key="loss_reason4"></li></ol><div class="motivation-block" data-translate-key="loss_motivation"></div><div class="nav-buttons full-width"><button class="main-button" id="btn-loss-analysis-back" data-translate-key="loss_analysis_btn"></button></div></div></div>

    <!-- –≠–ö–†–ê–ù–´ –î–ï–ô–°–¢–í–ò–ô -->
    <div id="wip-view" class="view"><div class="card"><h1 class="title" data-translate-key="wip_title"></h1><p class="description" data-translate-key="wip_desc"></p><div class="nav-buttons"><button class="back-button" id="btn-wip-back" data-translate-key="back_btn"></button></div></div></div>
    <div id="signal-active-view" class="view"><div class="card signal-card"><div id="signal-stage-1"><p class="emoji-spinner">‚è≥</p><h1 class="title" data-translate-key="search_title"></h1><p class="description" data-translate-key="search_desc"></p></div><div id="signal-stage-2" style="display: none;"><button class="main-button" id="btn-get-signal" data-translate-key="signal_get_btn"></button></div><div id="signal-stage-3" style="display: none;"><p class="signal-step" id="signal-status-ready" data-translate-key="signal_ready"></p><p class="signal-step" id="signal-pair"></p><p class="signal-step" id="signal-exp-soon" data-translate-key="signal_exp_soon"></p><p class="signal-step" id="signal-expiration" style="display: none;"></p><div id="signal-confirmation-container" style="display: none; margin-top: 20px;"><button class="main-button" id="btn-confirm-ready" data-translate-key="confirm_ready_btn"></button></div><p class="signal-step" id="signal-direction" style="display: none;"></p><div id="signal-result-container" style="display: none;"><p class="signal-result" id="signal-result"></p><div id="signal-win-buttons" style="display: none;"><button class="action-button" id="btn-next-signal" data-translate-key="next_signal_btn"></button><button class="action-button vip" id="btn-goto-vip-from-win" data-translate-key="want_vip_btn"></button><button class="action-button lost" id="btn-i-lost" data-translate-key="i_lost_btn"></button><button class="back-button" id="btn-goto-profile-from-win" data-translate-key="goto_profile_btn" style="width: 100%; text-align: center; margin-top: 10px;"></button></div><div id="signal-loss-buttons" style="display: none;"><button class="action-button" id="btn-next-from-loss-result" data-translate-key="next_signal_btn"></button><button class="action-button vip" id="btn-vip-from-loss-result" data-translate-key="want_vip_btn"></button><button class="back-button" id="btn-goto-profile-from-loss" data-translate-key="goto_profile_btn" style="width: 100%; text-align: center; margin-top: 10px;"></button></div></div></div></div></div>
    
</div>

<button id="faq-button" class="faq-button">?</button>

<script>
    const tg = window.Telegram.WebApp;
    tg.ready();
    tg.expand();
    tg.setHeaderColor('#12171f');
    tg.setBackgroundColor('#12171f');

    const REGISTER_LINK_TEMPLATE = "https://u3.shortink.io/register?utm_campaign=825192&utm_source=affiliate&utm_medium=sr&a=PDSrNY9vG5LpeF&ac=1d&code=50START";
    
    const TRANSLATIONS = {
        'ru': {
            'loading': '–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...', 'error_text': '–û—à–∏–±–∫–∞: –Ω–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.', 'next_btn': '–î–∞–ª–µ–µ >', 'back_btn': '< –ù–∞–∑–∞–¥',
            'not_filled_in': '(–Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ)', 'fill_in_btn': '–∑–∞–ø–æ–ª–Ω–∏—Ç—å', 'edit_btn': '–∏–∑–º–µ–Ω–∏—Ç—å',
            'prompt_name': '–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è:', 'prompt_about': '–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ —Å–µ–±–µ:', 'start_btn': '–°—Ç–∞—Ä—Ç', 'goto_profile_btn': '–í –ø—Ä–æ—Ñ–∏–ª—å',
            'onb1_ai_users': '40+ —Ç—Ä–µ–π–¥–µ—Ä–æ–≤ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —ç—Ç–æ–≥–æ –ò–ò-–±–æ—Ç–∞', 'onb1_stat_users': '–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π', 'onb1_stat_earned': '–∑–∞—Ä–∞–±–æ—Ç–∞–Ω–æ', 'onb1_stat_recommended': '–†–ï–ö–û–ú–ï–ù–î–û–í–ê–ù–û',
            'tutorial_title': '–¢—É—Ç–æ—Ä–∏–∞–ª', 'tutorial_b1': '–ü–æ–¥–≥–æ—Ç–æ–≤—å—Å—è –ø–µ—Ä–µ–¥ —Å–∏–≥–Ω–∞–ª–æ–º, –±—É–¥—å –≤–Ω–∏–º–∞—Ç–µ–ª–µ–Ω –∏ –±–µ—Å—Å—Ç—Ä–∞—à–µ–Ω.', 'tutorial_b2': '–ë—ã—Å—Ç—Ä–æ –æ—Ç–∫—Ä–æ–π —Å–∞–π—Ç –∏ –ø–æ–≤—Ç–æ—Ä–∏ —Å–¥–µ–ª–∫—É –∑–∞ –º–Ω–æ–π. –Ø –¥–∞–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, —Ç—É—Ç –≤–∞–∂–Ω–∞ —Ç–≤–æ—è <b>—Å–∫–æ—Ä–æ—Å—Ç—å</b>.', 'tutorial_b3': '8-12 —Å–∏–≥–Ω–∞–ª–æ–≤: –∑–∞–∫—Ä–µ–ø–∏ —Å–≤–æ—é –ø—Ä–∏–±—ã–ª—å –∏ –Ω–µ —Ç–æ—Ä–æ–ø–∏—Å—å –µ—ë —Ç—Ä–∞—Ç–∏—Ç—å. –ü—Ä–æ–¥–æ–ª–∂–∞–π —Ç–æ—Ä–≥–æ–≤–∞—Ç—å –∏ —É–º–Ω–æ–∂–∞–π –ø—Ä–∏–±—ã–ª—å, –±—É–¥—å —Ä–∞—Ü–∏–æ–Ω–∞–ª–µ–Ω.', 'tutorial_b4': '–ü–æ–ª—É—á–∞–π –∑–≤–∞–Ω–∏—è –∏ —Ä–∞—Å—Ç–∏ –≤ —Ä–µ–π—Ç–∏–Ω–≥–µ, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –≤ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ —Å–∞–º—ã—Ö —É—Å–ø–µ—à–Ω—ã—Ö —é–∑–µ—Ä–æ–≤.', 'tutorial_ready_btn': '–Ø –≥–æ—Ç–æ–≤!',
            'step1_label': '–ü–ï–†–í–´–ô –®–ê–ì', 'step1_title': '–°–æ–∑–¥–∞–π –∞–∫–∫–∞—É–Ω—Ç', 'step1_side_note': '–£ –≤—Å–µ—Ö –Ω–∞—à–∏—Ö —é–∑–µ—Ä–æ–≤ –º–æ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –≤—ã–≤–æ–¥—ã –±–ª–∞–≥–æ–¥–∞—Ä—è –ª–∏—Ü–µ–Ω–∑–∏–∏ P/O.', 'step1_btn_register': '–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è', 'how_to_register_btn': '–ö–∞–∫ —Å–¥–µ–ª–∞—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é?', 'have_account_btn': '–£ –º–µ–Ω—è —É–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç',
            'how_to_reg_title': '–í—Å—ë –ø—Ä–æ—Å—Ç–æ!', 'how_to_reg_subtitle': '–î–µ–π—Å—Ç–≤—É–π –ø–æ —ç—Ç–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:', 'how_to_reg_s1': '–ü–µ—Ä–µ–π–¥–∏ –ø–æ —Å—Å—ã–ª–∫–µ:', 'how_to_reg_s1_btn': '–°—Å—ã–ª–∫–∞', 'how_to_reg_s2': '–í–≤–µ–¥–∏ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—É—é –ø–æ—á—Ç—É –∏ –ø—Ä–∏–¥—É–º–∞–π –ø–∞—Ä–æ–ª—å.', 'how_to_reg_s3': '–í –ø–æ–ª–µ ¬´–ø—Ä–æ–º–æ–∫–æ–¥¬ª –Ω–∞–ø–∏—à–∏ <em>50START</em>.', 'how_to_reg_s4': '–ü—Ä–∏–º–∏ —É—Å–ª–æ–≤–∏—è –±—Ä–æ–∫–µ—Ä–∞, –Ω–∞–∂–∞–≤ –Ω–∞ –≥–∞–ª–æ—á–∫—É.', 'how_to_reg_s5': '–ñ–º–∏ ¬´–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è¬ª!', 'how_to_reg_video': '"–≤–∏–¥–µ–æ–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è"',
            'reg_success_title': '–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞!', 'reg_success_desc': '–£–∂–µ —Å–∫–æ—Ä–æ —Ç—ã –ø–æ–ª—É—á–∏—à—å —Å–≤–æ–π –ø–µ—Ä–≤—ã–π —Å–∏–≥–Ω–∞–ª –∏ –Ω–∞—á–Ω—ë—à—å –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –≤–º–µ—Å—Ç–µ —Å —Å–æ—Ç–Ω—è–º–∏ –¥—Ä—É–≥–∏—Ö —Ç—Ä–µ–π–¥–µ—Ä–æ–≤.',
            'step2_title': '–§–∏–Ω–∞–ª—å–Ω—ã–π —à–∞–≥, <em>—Å–¥–µ–ª–∞–π –µ–≥–æ!</em>', 'step2_subtitle': '–û–ø—Ä–µ–¥–µ–ª–∏—Å—å —Å —Ä–∞–∑–º–µ—Ä–æ–º –¥–µ–ø–æ–∑–∏—Ç–∞.', 'step2_strategy_bubble': '–í—ã–±–µ—Ä–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏—é:', 'strat1_title': '–†–∏—Å–∫ –≤–∫–ª—é—á–µ–Ω', 'strat1_li1': '–ú–∞–ª–µ–Ω—å–∫–∏–π –¥–µ–ø–æ–∑–∏—Ç', 'strat1_li2': '–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–≥–Ω–∞–ª–æ–≤', 'strat1_li3': '–ë–æ—è—Ç—å—Å—è –∏ –∏–≥—Ä–∞—Ç—å –ø–æ-–∫—Ä—É–ø–Ω–æ–º—É', 'strat2_title': '–†–∏—Å–∫ –≤—ã–∫–ª—é—á–µ–Ω', 'strat2_li1': '–î–æ—Å—Ç–æ–π–Ω—ã–π –¥–µ–ø–æ–∑–∏—Ç', 'strat2_li2': '–ë—ã—Å—Ç—Ä–∞—è –ø—Ä–∏–±—ã–ª—å', 'strat2_li3': '–ë—Ä–∞—Ç—å –æ—Ç –∂–∏–∑–Ω–∏ –≤—Å—ë', 'step2_btn_deposit': '–°–¥–µ–ª–∞—Ç—å –¥–µ–ø–æ–∑–∏—Ç', 'how_to_deposit_btn': '–ö–∞–∫ —Å–¥–µ–ª–∞—Ç—å –¥–µ–ø–æ–∑–∏—Ç?', 'how_to_deposit_text': '<i>*–ó–¥–µ—Å—å –±—É–¥–µ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è*</i>',
            'real_money_q': '–•–æ—Ä–æ—à–æ! –ù–æ –Ω–∞ –Ω—ë–º –µ—Å—Ç—å real money?', 'yes_btn': '–î–∞', 'no_btn': '–ù–µ—Ç',
            'new_acc_flow_title': '–•–æ—Ä–æ—à–æ! –ß—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–µ—Å—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –±–æ—Ç–∞ –∏ –ø–æ–ª—É—á–∞—Ç—å AI-signals, —Ç–µ–±–µ –Ω—É–∂–µ–Ω –Ω–æ–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç.', 'new_acc_flow_subtitle': '–ü–æ—ç—Ç–æ–º—É –¥–ª—è –Ω–∞—á–∞–ª–∞:', 'new_acc_flow_step1': '–£–¥–∞–ª–∏ —Å–≤–æ–π —Ç–µ–∫—É—â–∏–π –∞–∫–∫–∞—É–Ω—Ç', 'new_acc_flow_btn1': '–ö–∞–∫ –∏ –∑–∞—á–µ–º —É–¥–∞–ª—è—Ç—å –∞–∫–∫–∞—É–Ω—Ç?', 'new_acc_flow_step2': '–°–æ–∑–¥–∞–π –Ω–æ–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç –ø–æ —ç—Ç–æ–π –∫–Ω–æ–ø–∫–µ', 'new_acc_flow_note': '! –ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–æ–≤–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–π –¥—Ä—É–≥—É—é —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—É—é –ø–æ—á—Ç—É.',
            'how_to_del_title': '–ö–∞–∫ —É–¥–∞–ª–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç?', 'how_to_del_s1': '–ü–µ—Ä–µ–π–¥–∏ –≤ —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å, –≥–¥–µ —É–∫–∞–∑–∞–Ω—ã —Ç–≤–æ–∏ –ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.', 'how_to_del_s2': '–ü—Ä–æ–ª–∏—Å—Ç–∞–π –≤ —Å–∞–º—ã–π –Ω–∏–∑ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.', 'how_to_del_s3': '–ù–∞–∂–º–∏ –±–æ–ª—å—à—É—é –∫—Ä–∞—Å–Ω—É—é –∫–Ω–æ–ø–∫—É: "Delete account".', 'how_to_del_s4': '–í—ã–±–µ—Ä–∏ <em>–ª—é–±—É—é</em> –ø—Ä–∏—á–∏–Ω—É –∏ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏ —É–¥–∞–ª–µ–Ω–∏–µ.', 'how_to_del_s5': '–í—ã–π–¥–∏ —Å –∞–∫–∫–∞—É–Ω—Ç–∞.', 'how_to_del_video_placeholder': '"—Ç—É—Ç –±—É–¥–µ—Ç –≤–∏–¥–µ–æ–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è"',
            'have_money_title': '–•–æ—Ä–æ—à–æ! –ß—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–µ—Å—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –±–æ—Ç–∞ –∏ –ø–æ–ª—É—á–∞—Ç—å AI-signals, —Ç–µ–±–µ –Ω—É–∂–µ–Ω –Ω–æ–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç.', 'have_money_subtitle': '–£ —Ç–µ–±—è –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤:', 'have_money_opt1': '–í—ã–≤–µ—Å—Ç–∏ –æ—Å—Ç–∞—Ç–æ–∫ –¥–µ–Ω–µ–≥, –∑–∞—Ç–µ–º —É–¥–∞–ª–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç –∏ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π.', 'have_money_btn1': '–ö–∞–∫ –≤—ã–≤–µ—Å—Ç–∏ –¥–µ–Ω—å–≥–∏ —Å –∞–∫–∫–∞—É–Ω—Ç–∞?', 'have_money_opt2': '–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç –Ω–∞ –¥—Ä—É–≥–∞.', 'have_money_opt3': '–†–∏—Å–∫—É–π.', 'have_money_btn3': '–ß—Ç–æ?',
            'risk_info_text': '–ï—Å–ª–∏ –¥–µ–Ω–µ–≥ –Ω–∞ –±–∞–ª–∞–Ω—Å–µ –º–∞–ª–æ ‚Äì —Ä–∏—Å–∫—É–π –∏ –∏–¥–∏ –¥–æ –∫–æ–Ω—Ü–∞: –ª–∏–±–æ –≤—Å–µ –ø—Ä–æ–∏–≥—Ä–∞–µ—à—å, –ª–∏–±–æ —É–¥–≤–æ–∏—à—å. –ú–æ–∏ —Å–∏–≥–Ω–∞–ª—ã –æ–∫—É–ø—è—Ç –±–æ–ª—å—à–µ, —á–µ–º —Ç–≤–æ–π –æ—Å—Ç–∞—Ç–æ–∫. <em>–î–µ–π—Å—Ç–≤—É–π!</em>',
            'pro_tip_title': '–°–æ–≤–µ—Ç –æ—Ç –ø—Ä–æ-—Ç—Ä–µ–π–¥–µ—Ä–æ–≤', 'pro_tip_desc': '–ù–µ –±–æ–π—Å—è –ø–æ—Ç–µ—Ä—å, –æ–Ω–∏ –µ—Å—Ç—å —É –≤—Å–µ—Ö. –í –¥–æ–ª–≥–æ—Å—Ä–æ–∫–µ –≤—Å–µ —Ç–≤–æ–∏ –¥–µ–π—Å—Ç–≤–∏—è –ø—Ä–∏–Ω–µ—Å—É—Ç –ø—Ä–∏–±—ã–ª—å!', 'pro_tip_btn': 'OK!',
            'lobby_title': '–õ–æ–±–±–∏', 'lobby_congrats': '–ü–æ–∑–¥—Ä–∞–≤–ª—è—é —Å –ø–µ—Ä–≤—ã–º –¥–µ–ø–æ–∑–∏—Ç–æ–º!', 'lobby_footnote': '–≠—Ç–æ —Ç–≤–æ—è –æ—Ç–ø—Ä–∞–≤–Ω–∞—è —Ç–æ—á–∫–∞, –Ω–µ —Å—á–∏—Ç–∞—è –±–æ–Ω—É—Å—ã.', 'lobby_btn_profile': '–ü–µ—Ä–µ–π—Ç–∏ –≤ –ø—Ä–æ—Ñ–∏–ª—å —Ç—Ä–µ–π–¥–µ—Ä–∞',
            'profile_title': '–ü—Ä–æ—Ñ–∏–ª—å —Ç—Ä–µ–π–¥–µ—Ä–∞', 'profile_nickname': '–ù–∏–∫–Ω–µ–π–º', 'profile_name': '–ò–º—è', 'profile_about': '–û —Å–µ–±–µ', 'profile_balance': '–¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å', 'profile_rank': '–¢–µ–∫—É—â–µ–µ –∑–≤–∞–Ω–∏–µ', 'rank_novice': '–ù–æ–≤–∏—á–æ–∫', 'rank_detail_vip': '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –í–ò–ü —Å–∏–≥–Ω–∞–ª–æ–≤', 'rank_detail_days': '–° –¥–∞—Ç—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø—Ä–æ—à–ª–æ', 'rank_detail_maxdep': '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –¥–µ–ø–æ–∑–∏—Ç', 'rank_detail_maxdep_note': '–Ω–∏–∂–µ —Å—Ä–µ–¥–Ω–µ–≥–æ',
            'profile_btn_trade_free': '–¢–æ—Ä–≥–æ–≤–∞—Ç—å –Ω–∞ –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–∞—Ö', 'profile_btn_trade_vip': 'VIP —Å–∏–≥–Ω–∞–ª—ã', 'profile_btn_help': '–ü–æ–º–æ—â—å', 'profile_btn_promocodes': '–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –ø—Ä–æ–º–æ–∫–æ–¥—ã',
            'promocode_title': '–ú–æ–∏ –ø—Ä–æ–º–æ–∫–æ–¥—ã',
            'free_signal_title': '–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Å–∏–≥–Ω–∞–ª', 'free_signal_text': '–ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É <b>–°—Ç–∞—Ä—Ç</b>, –∫–æ–≥–¥–∞ –±—É–¥–µ—à—å –≥–æ—Ç–æ–≤ –ø–æ–ª—É—á–∏—Ç—å —Å–≤–æ–π {count} —Å–∏–≥–Ω–∞–ª.',
            'loss_analysis_title': '–°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, —Ç—ã —Å–¥–µ–ª–∞–ª —á—Ç–æ-—Ç–æ –Ω–µ —Ç–∞–∫', 'loss_analysis_subtitle': '–í–æ–∑–º–æ–∂–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã:', 'loss_reason1': '–ù–µ –≤–æ–≤—Ä–µ–º—è –æ—Ç–∫—Ä—ã–ª —Å–¥–µ–ª–∫—É <span>(—Å–ª–∏—à–∫–æ–º –ø–æ–∑–¥–Ω–æ)</span>', 'loss_reason2': '–í—ã–±—Ä–∞–ª –Ω–µ–≤–µ—Ä–Ω—É—é –≤–∞–ª—é—Ç–Ω—É—é –ø–∞—Ä—É', 'loss_reason3': '–û—Ç–∫—Ä—ã–ª —Å–¥–µ–ª–∫—É –≤ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏', 'loss_reason4': '–õ–∏–±–æ –º–æ–∏ –∞–ª–≥–æ—Ä–∏—Ç–º—ã –¥–∞–ª–∏ —Å–±–æ–π <span>(–∏ —Ç–∞–∫–æ–µ –≤–æ–∑–º–æ–∂–Ω–æ)</span>', 'loss_motivation': '–ü–æ–º–Ω–∏, —á—Ç–æ –ø–æ—Ç–µ—Ä—å –Ω–µ –Ω—É–∂–Ω–æ –±–æ—è—Ç—å—Å—è, –æ–Ω–∏ –µ—Å—Ç—å –∏ –±—É–¥—É—Ç —É –≤—Å–µ—Ö. –¢–æ—Ç, –∫—Ç–æ –Ω–µ —Å–ª–æ–º–∞–ª—Å—è –æ—Ç –Ω–∏—Ö, –¥–æ–π–¥—ë—Ç –¥–æ —Å–≤–æ–∏—Ö –∏–∫—Å–æ–≤ –ø—Ä–∏–±—ã–ª–∏!', 'loss_analysis_btn': '–ù–∏ —à–∞–≥—É –Ω–∞–∑–∞–¥!',
            'wip_title': '–í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ', 'wip_desc': '–≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è —Å–∫–æ—Ä–æ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞.',
            'search_title': '–Ø –≤ –ø–æ–∏—Å–∫–µ —Å–∏–≥–Ω–∞–ª–∞', 'search_desc': '–ü–æ–¥–≥–æ—Ç–æ–≤—å—Å—è, –∑–∞–π–¥–∏ –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—É, –Ω–∞–¥–æ –±—É–¥–µ—Ç –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –±—ã—Å—Ç—Ä–æ', 'signal_get_btn': '–ü–æ–ª—É—á–∏—Ç—å —Å–∏–≥–Ω–∞–ª', 'signal_ready': '–ì–æ—Ç–æ–≤–æ!', 'signal_pair_select': '–í—ã–±–µ—Ä–∏ –≤–∞–ª—é—Ç–Ω—É—é –ø–∞—Ä—É <b>{pair}</b>', 'signal_exp_time': '–í—Ä–µ–º—è —ç–∫—Å–ø–∏—Ä–∞—Ü–∏–∏ <b>{exp}</b>', 'signal_exp_soon': '–°–ï–ô–ß–ê–° —Å–∫–∞–∂—É –≤—Ä–µ–º—è —ç–∫—Å–ø–∏—Ä–∞—Ü–∏–∏', 'signal_buy': '–ü–û–ö–£–ü–ê–ô üü¢', 'signal_sell': '–ü–†–û–î–ê–í–ê–ô üî¥', 'signal_win': '–ü–û–ë–ï–î–ê', 'signal_loss': '–ü–†–û–ò–ì–†–´–®', 'next_signal_btn': '–°–ª–µ–¥—É—é—â–∏–π!', 'want_vip_btn': '–•–æ—á—É –í–ò–ü —Å–∏–≥–Ω–∞–ª', 'i_lost_btn': '–Ø –ø—Ä–æ–∏–≥—Ä–∞–ª', 'confirm_ready_btn': '–Ø –≥–æ—Ç–æ–≤!',
            'profile_btn_rating': '–†–µ–π—Ç–∏–Ω–≥',
            'rating_title': '–†–µ–π—Ç–∏–Ω–≥', 
            'your_position': '–í–∞—à–∞ –ø–æ–∑–∏—Ü–∏—è',
            'save_btn': '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å',
            'promocode_copied': '–ü—Ä–æ–º–æ–∫–æ–¥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!',
            'rank_novice': 'Strategist', // –ù–∞—á–∞–ª—å–Ω—ã–π —Ä–∞–Ω–≥
            'rank_strategist': 'Strategist',
            'rank_royal': 'Royal',
            'rank_hero': 'Hero',
            'rank_nova': 'Nova',
            'rank_legend': 'Legend',
        },
        'en': { 
            'loading': 'Loading data...', 'error_text': 'Error: User not identified.', 'next_btn': 'Next >', 'back_btn': '< Back',
            'not_filled_in': '(not filled)', 'fill_in_btn': 'fill in', 'edit_btn': 'edit',
            'prompt_name': 'Enter your name:', 'prompt_about': 'Tell us about yourself:', 'start_btn': 'Start', 'goto_profile_btn': 'To Profile',
            'onb1_ai_users': '40+ signal-traders using this AI-Bot', 'onb1_stat_users': 'users', 'onb1_stat_earned': 'earned', 'onb1_stat_recommended': 'RECOMMENDED',
            'tutorial_title': 'Tutorial', 'tutorial_b1': 'Prepare before the signal, be attentive and fearless.', 'tutorial_b2': 'Quickly open the site and copy the trade. Your <b>speed</b> is important.', 'tutorial_b3': '8-12 signals: secure your profit. Keep trading and multiply your profit.', 'tutorial_b4': 'Get ranks and grow to access the community of successful users.', 'tutorial_ready_btn': 'I\'m ready!',
            'step1_label': 'FIRST STEP', 'step1_title': 'Create an account', 'step1_side_note': 'All our users have instant withdrawals thanks to the P/O license.', 'step1_btn_register': 'Register', 'how_to_register_btn': 'How to register?', 'have_account_btn': 'I already have an account',
            'how_to_reg_title': 'It\'s simple!', 'how_to_reg_subtitle': 'Follow these instructions:', 'how_to_reg_s1': 'Follow the link:', 'how_to_reg_s1_btn': 'Link', 'how_to_reg_s2': 'Enter your email and create a password.', 'how_to_reg_s3': 'In the "promocode" field, write <em>50START</em>.', 'how_to_reg_s4': 'Accept the broker\'s terms by clicking the checkbox.', 'how_to_reg_s5': 'Click "Register"!', 'how_to_reg_video': '"video instruction"',
            'reg_success_title': 'Registration Confirmed!', 'reg_success_desc': 'Soon you will receive your first signal and start earning.',
            'step2_title': 'Final step, <em>make it!</em>', 'step2_subtitle': 'Decide on the deposit size.', 'step2_strategy_bubble': 'Choose a strategy:', 'strat1_title': 'Risk On', 'strat1_li1': 'Small deposit', 'strat1_li2': 'Testing signals', 'strat1_li3': 'Be afraid and play big', 'strat2_title': 'Risk Off', 'strat2_li1': 'Decent deposit', 'strat2_li2': 'Fast profit', 'strat2_li3': 'Take everything from life', 'step2_btn_deposit': 'Make a deposit', 'how_to_deposit_btn': 'How to make a deposit?', 'how_to_deposit_text': '<i>*Instructions will be here*</i>',
            'real_money_q': 'Okay! But does it have real money?', 'yes_btn': 'Yes', 'no_btn': 'No',
            'new_acc_flow_title': 'Okay! To use all bot functions and receive AI-signals, you need a new account.', 'new_acc_flow_subtitle': 'So to start:', 'new_acc_flow_step1': 'Delete your current account', 'new_acc_flow_btn1': 'How and why to delete the account?', 'new_acc_flow_step2': 'Create a new account using this button', 'new_acc_flow_note': '! When registering a new account, use a different email address.',
            'how_to_del_title': 'How to delete the account?', 'how_to_del_s1': 'Go to your profile where your personal data is listed.', 'how_to_del_s2': 'Scroll to the very bottom of the page.', 'how_to_del_s3': 'Press the big red button: "Delete account".', 'how_to_del_s4': 'Choose <em>any</em> reason and confirm the deletion.', 'how_to_del_s5': 'Log out of the account.', 'how_to_del_video_placeholder': '"video guide will be here"',
            'have_money_title': 'Okay! To use all bot functions and receive AI-signals, you need a new account.', 'have_money_subtitle': 'You have several options:', 'have_money_opt1': 'Withdraw the remaining money, then delete the account and create a new one.', 'have_money_btn1': 'How to withdraw funds?', 'have_money_opt2': 'Register an account for a friend.', 'have_money_opt3': 'Take a risk.', 'have_money_btn3': 'What?',
            'risk_info_text': 'If there is little money on the balance - take a risk and go all the way: either you lose everything, or you double it. My signals will pay off more than your balance. <em>Act!</em>',
            'pro_tip_title': 'Advice from pro-traders', 'pro_tip_desc': 'Don\'t be afraid of losses, everyone has them. In the long run, all your actions will bring profit!', 'pro_tip_btn': 'OK!',
            'lobby_title': 'Lobby', 'lobby_congrats': 'Congratulations on your first deposit!', 'lobby_footnote': 'This is your starting point, not counting bonuses.', 'lobby_btn_profile': 'Go to trader\'s profile',
            'profile_title': 'Trader Profile', 'profile_nickname': 'Nickname', 'profile_name': 'Name', 'profile_about': 'About me', 'profile_balance': 'Current Balance', 'profile_rank': 'Current Rank', 'rank_novice': 'Novice', 'rank_detail_vip': 'VIP signals received', 'rank_detail_days': 'Days since registration', 'rank_detail_maxdep': 'Maximum deposit', 'rank_detail_maxdep_note': 'below average',
            'profile_btn_trade_free': 'Trade on free signals', 'profile_btn_trade_vip': 'VIP signals', 'profile_btn_help': 'Help', 'profile_btn_promocodes': 'Personal promo codes',
            'promocode_title': 'My promocodes',
            'free_signal_title': 'Free Signal', 'free_signal_text': 'Press the <b>Start</b> button when you are ready to receive your {count} signal.',
            'loss_analysis_title': 'You probably did something wrong', 'loss_analysis_subtitle': 'Possible options:', 'loss_reason1': 'Opened the trade at the wrong time <span>(too late)</span>', 'loss_reason2': 'Chose the wrong currency pair', 'loss_reason3': 'Opened the trade in the opposite direction', 'loss_reason4': 'Or my algorithms failed <span>(it happens)</span>', 'loss_motivation': 'Remember not to be afraid of losses; everyone has them. Those who don\'t break from them will reach their profit multipliers!', 'loss_analysis_btn': 'Not one step back!',
            'wip_title': 'Work in Progress','wip_desc': 'This feature will be available soon.',
            'search_title': 'Searching for a signal', 'search_desc': 'Get ready, go to the platform, you will need to act quickly', 'signal_get_btn': 'Get Signal', 'signal_ready': 'Ready!', 'signal_pair_select': 'Choose currency pair <b>{pair}</b>', 'signal_exp_time': 'Expiration time <b>{exp}</b>', 'signal_exp_soon': 'I will tell you the expiration time NOW', 'signal_buy': 'BUY üü¢', 'signal_sell': 'SELL üî¥', 'signal_win': 'VICTORY', 'signal_loss': 'LOSS', 'next_signal_btn': 'Next Signal!', 'want_vip_btn': 'I want a VIP signal', 'i_lost_btn': 'I lost', 'confirm_ready_btn': 'I\'m ready!',
            'profile_btn_rating': 'Rating',
            'rating_title': 'Rating', 
            'your_position': 'Your Position',
            'save_btn': 'Save',
            'promocode_copied': 'Promocode copied!',
            'rank_novice': 'Strategist', // –ù–∞—á–∞–ª—å–Ω—ã–π —Ä–∞–Ω–≥\
            'rank_strategist': 'Strategist',
            'rank_royal': 'Royal',
            'rank_hero': 'Hero',
            'rank_nova': 'Nova',
            'rank_legend': 'Legend',
        }
    };
    let userLang = 'en';
    let currentViewId = '';
    let previousViewId = '';
    let userId;

    function getRussianOrdinal(n) {
        if (userLang !== 'ru') {
            const lastDigit = n % 10, lastTwoDigits = n % 100;
            if (lastTwoDigits >= 11 && lastTwoDigits <= 13) return `${n}th`;
            switch (lastDigit) {
                case 1: return `${n}st`;
                case 2: return `${n}nd`;
                case 3: return `${n}rd`;
                default: return `${n}th`;
            }
        }
        return `${n}-–π`;
    }
        function renderRating(data) {
        const container = document.getElementById('rating-list-container');
        container.innerHTML = '';
        const user = tg.initDataUnsafe.user;
        const t = TRANSLATIONS[userLang] || TRANSLATIONS['en'];
        
        const fakeNames = ["CryptoKing", "ProfitHunter", "ScalperX", "LamboDreamer", "WolfOfTrades", "MarginCall", "DiamondHand", "SignalSurfer", "BullrunRider", "CandleMaster", "PixelTrader", "QuantumLeap", "ZenithTrader", "ApexGainz", "StonksOnly"];
        const getRandom = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;
        
        // –í–∞—à–∏ —Ç–æ—á–Ω—ã–µ —Ü–∏—Ñ—Ä—ã –¥–ª—è —Ç–æ–ø-5
        const top5Sums = [641219.71, 412101.03, 398336.80, 361540.11, 334110.56];
        
        // 1. –¢–æ–ø 15
        let lastSum = top5Sums[4]; // –ù–∞—á–∏–Ω–∞–µ–º –æ—Ç—Å—á–µ—Ç –æ—Ç 5-–≥–æ –º–µ—Å—Ç–∞
        for(let i = 1; i <= 15; i++) {
            const name = fakeNames[i-1];
            let sum;
            if (i <= 5) {
                sum = top5Sums[i-1];
            } else {
                lastSum -= getRandom(15000, 30000);
                sum = Math.max(lastSum, (16 - i) * 10000); // –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º, —á—Ç–æ —Å—É–º–º–∞ –Ω–µ –±—É–¥–µ—Ç –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–π
            }
            container.innerHTML += `<li class="rating-item"><span class="rating-pos">#${i}</span><span class="rating-name">${name}</span><span class="rating-sum">$${sum.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</span></li>`;
        }
        
        // 2. –°–µ–ø–∞—Ä–∞—Ç–æ—Ä
        container.innerHTML += `<li class="rating-separator">...</li>`;
        
        // 3. –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ "—Å–æ—Å–µ–¥–∏"
        let userRankKey = `userRank_${userId}`;
        let userPos = localStorage.getItem(userRankKey);
        if (!userPos) {
            userPos = getRandom(20138, 21999);
            localStorage.setItem(userRankKey, userPos);
        }
        userPos = parseInt(userPos);
        const userSum = data.user_withdrawal_sum || 0.0;
        
        // –ò–≥—Ä–æ–∫ –≤—ã—à–µ
        const playerAboveSum = userSum + getRandom(50, 200);
        container.innerHTML += `<li class="rating-item"><span class="rating-pos">#${userPos - 1}</span><span class="rating-name">${fakeNames[getRandom(0, fakeNames.length - 1)]}</span><span class="rating-sum">$${playerAboveSum.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</span></li>`;
        
        // –°–∞–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
        const userName = user.first_name || t.your_position;
        container.innerHTML += `<li class="rating-item user"><span class="rating-pos">#${userPos}</span><span class="rating-name">${userName} (–í—ã)</span><span class="rating-sum">$${userSum.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</span></li>`;

        // –ò–≥—Ä–æ–∫ –Ω–∏–∂–µ
        container.innerHTML += `<li class="rating-item"><span class="rating-pos">#${userPos + 1}</span><span class="rating-name">${fakeNames[getRandom(0, fakeNames.length - 1)]}</span><span class="rating-sum">$0.00</span></li>`;
    }
    function getSignalCount() { return parseInt(localStorage.getItem(`signalCounter_${userId}`) || '1'); }
    function incrementSignalCount() {
        let count = getSignalCount();
        localStorage.setItem(`signalCounter_${userId}`, count + 1);
    }

    function applyTranslations(lang) {
        const t = TRANSLATIONS[lang];
        document.querySelectorAll('[data-translate-key]').forEach(el => {
            const key = el.getAttribute('data-translate-key');
            if (t[key]) {
                el.innerHTML = t[key];
            }
        });
    }
    
    function prepareFreeSignalView() {
        const count = getSignalCount();
        const ordinal = getRussianOrdinal(count);
        showView('free-signal-start-view');
        document.getElementById('free-signal-text').innerHTML = TRANSLATIONS[userLang]['free_signal_text'].replace('{count}', `<b>${ordinal}</b>`);
    }

    function showView(viewId) {
        if (currentViewId && currentViewId !== viewId) { previousViewId = currentViewId; }
        currentViewId = viewId;
        document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
        const viewElement = document.getElementById(viewId);
        if (viewElement) { viewElement.classList.add('active'); }
        const faqButton = document.getElementById('faq-button');
        const faqVisibleOn = ['post-deposit-view', 'post-reg-view', 'trader-profile-view'];
        if (faqVisibleOn.includes(viewId)) {
            faqButton.classList.add('visible');
        } else {
            faqButton.classList.remove('visible');
        }
    }
    function showNotification(text) {
        const toast = document.getElementById('notification-toast');
        toast.textContent = text;
        toast.classList.add('visible');
        setTimeout(() => {
            toast.classList.remove('visible');
        }, 2500);
    }
    function renderProfileField(fieldKey, valueElId) {
        const valueEl = document.getElementById(valueElId);
        const t = TRANSLATIONS[userLang] || TRANSLATIONS['en'];

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –∏ –∫–Ω–æ–ø–∫–∏ "–∏–∑–º–µ–Ω–∏—Ç—å"
        const renderDisplayMode = () => {
            const savedValue = localStorage.getItem(`${fieldKey}_${userId}`) || '';
            const buttonText = savedValue ? t.edit_btn : t.fill_in_btn;
            const displayText = savedValue || `<span style="opacity: 0.6;">${t.not_filled_in}</span>`;
            
            valueEl.innerHTML = `${displayText} <button class="edit-button">${buttonText}</button>`;
            valueEl.querySelector('.edit-button').onclick = renderEditMode;
        };

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ–ª—è –≤–≤–æ–¥–∞ –∏ –∫–Ω–æ–ø–∫–∏ "—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å"
        const renderEditMode = () => {
            const savedValue = localStorage.getItem(`${fieldKey}_${userId}`) || '';
            valueEl.innerHTML = `
                <input type="text" class="inline-input" value="${savedValue}">
                <button class="save-button">${t.save_btn}</button>
            `;
            const input = valueEl.querySelector('.inline-input');
            input.focus(); // –°—Ä–∞–∑—É —Å—Ç–∞–≤–∏–º –∫—É—Ä—Å–æ—Ä –≤ –ø–æ–ª–µ
            
            const saveValue = () => {
                localStorage.setItem(`${fieldKey}_${userId}`, input.value);
                renderDisplayMode();
            };

            valueEl.querySelector('.save-button').onclick = saveValue;
            // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ –Ω–∞–∂–∞—Ç–∏—é Enter
            input.onkeydown = (e) => {
                if (e.key === 'Enter') {
                    saveValue();
                }
            };
        };

        renderDisplayMode();
    }

    function renderProfileData(data) {
        const user = tg.initDataUnsafe.user;
        const t = TRANSLATIONS[userLang] || TRANSLATIONS['en'];

        document.getElementById('profile-nickname-val').innerText = user.username ? `@${user.username}` : 'Not set';
        renderProfileField('userName', 'profile-name-val');
        renderProfileField('userAbout', 'profile-about-val');
        
        const depositEvent = data.events.find(e => e[0] === 'FTD' || e[0] === 'dep');
        const balance = depositEvent ? parseFloat(depositEvent[1]).toFixed(2) : "0.00";
        document.getElementById('profile-balance-val').innerText = `$${balance}`;
        
        // --- –ù–û–í–ê–Ø –õ–û–ì–ò–ö–ê –û–ü–†–ï–î–ï–õ–ï–ù–ò–Ø –†–ê–ù–ì–ê ---
        const totalDeposit = data.total_deposit_sum || 0;
        let rankKey = 'rank_strategist';
        if (totalDeposit >= 20000) rankKey = 'rank_legend';
        else if (totalDeposit >= 5000) rankKey = 'rank_nova';
        else if (totalDeposit >= 1000) rankKey = 'rank_hero';
        else if (totalDeposit >= 400) rankKey = 'rank_royal';
        
        document.getElementById('current-rank-name').innerText = t[rankKey];
        // --- –ö–û–ù–ï–¶ –ù–û–í–û–ô –õ–û–ì–ò–ö–ò ---

        if (data.reg_date) {
            const regDate = new Date(data.reg_date);
            const today = new Date();
            const timeDiff = today.getTime() - regDate.getTime();
            const daysDiff = Math.max(0, Math.floor(timeDiff / (1000 * 3600 * 24)));
            document.getElementById('days-since-reg').innerText = daysDiff;
        } else {
            document.getElementById('days-since-reg').innerText = 'N/A';
        }
        document.getElementById('max-deposit-val').innerText = `$${data.max_deposit || "0.00"}`;
    }

    function startSignalFlow() {
        showView('signal-active-view');
        const allElements = {'stage1': document.getElementById('signal-stage-1'),'stage2': document.getElementById('signal-stage-2'),'stage3': document.getElementById('signal-stage-3'),'resultContainer': document.getElementById('signal-result-container'),'winButtons': document.getElementById('signal-win-buttons'),'lossButtons': document.getElementById('signal-loss-buttons'),'confirmationContainer': document.getElementById('signal-confirmation-container'),'signalStatusReady': document.getElementById('signal-status-ready'),'signalPair': document.getElementById('signal-pair'),'signalStatusExpSoon': document.getElementById('signal-exp-soon'),'signalExpiration': document.getElementById('signal-expiration'),'signalDirection': document.getElementById('signal-direction'),};
        for (const key in allElements) { allElements[key].style.display = 'none'; }
        allElements.stage1.style.display = 'block';
        setTimeout(() => {allElements.stage1.style.display = 'none'; allElements.stage2.style.display = 'block';}, 5000);
        document.getElementById('btn-get-signal').onclick = () => {
            allElements.stage2.style.display = 'none'; allElements.stage3.style.display = 'block';
            const currencyPairs = ["EUR/RUB OTC", "AUD/USD OTC", "AUD/CAD OTC"], expirations = ["S15", "S20", "S25"], directions = ["buy", "sell"], getRandomItem = arr => arr[Math.floor(Math.random() * arr.length)], selectedPair = getRandomItem(currencyPairs), selectedExp = getRandomItem(expirations), selectedDir = getRandomItem(directions);
            setTimeout(() => { allElements.signalStatusReady.style.display = 'block'; }, 500);
            setTimeout(() => { allElements.signalPair.innerHTML = TRANSLATIONS[userLang]['signal_pair_select'].replace('{pair}', `<b>${selectedPair}</b>`); allElements.signalPair.style.display = 'block'; }, 1500);
            setTimeout(() => { allElements.signalStatusExpSoon.style.display = 'block'; }, 3000);
            setTimeout(() => { allElements.signalExpiration.innerHTML = TRANSLATIONS[userLang]['signal_exp_time'].replace('{exp}', `<b>${selectedExp}</b>`); allElements.signalExpiration.style.display = 'block'; allElements.confirmationContainer.style.display = 'block'; }, 10000);
            document.getElementById('btn-confirm-ready').onclick = () => {
                allElements.confirmationContainer.style.display = 'none'; let dirText = selectedDir === 'buy' ? TRANSLATIONS[userLang]['signal_buy'] : TRANSLATIONS[userLang]['signal_sell']; allElements.signalDirection.className = `signal-step ${selectedDir}-signal`; allElements.signalDirection.innerHTML = dirText; allElements.signalDirection.style.display = 'block'; const expirationInMs = parseInt(selectedExp.substring(1)) * 1000;
                setTimeout(() => {
                    const isWin = Math.random() < 0.7;
                    const signalResultEl = document.getElementById('signal-result');
                    if (isWin) { signalResultEl.innerHTML = TRANSLATIONS[userLang]['signal_win']; signalResultEl.className = 'signal-result win'; allElements.winButtons.style.display = 'flex'; }
                    else { signalResultEl.innerHTML = TRANSLATIONS[userLang]['signal_loss']; signalResultEl.className = 'signal-result loss'; allElements.lossButtons.style.display = 'flex'; }
                    allElements.resultContainer.style.display = 'block';
                }, expirationInMs);
            };
        };
    }

    function setupNavigation() {
        const openRegisterLink = () => { const personalLink = `${REGISTER_LINK_TEMPLATE}&sub_id1=${userId}`; tg.openLink(personalLink); };
        document.querySelectorAll('.promocode-item .code').forEach(el => {
            el.onclick = () => {
                navigator.clipboard.writeText(el.textContent).then(() => {
                    const t = TRANSLATIONS[userLang] || TRANSLATIONS['en'];
                    showNotification(t.promocode_copied);
                }).catch(err => {
                    console.error('Failed to copy text: ', err);
                });
            };
        });
        document.getElementById('btn-promocodes').onclick = () => showView('promocodes-view');
        document.getElementById('btn-promocodes-back').onclick = () => showView('trader-profile-view');
        // ... –≤–Ω—É—Ç—Ä–∏ setupNavigation() ...
        document.getElementById('btn-rating').onclick = () => showView('rating-view');
        document.getElementById('btn-rating-back').onclick = () => showView('trader-profile-view');
        document.getElementById('btn-trade-free').onclick = prepareFreeSignalView;
        document.getElementById('btn-free-signal-start').onclick = startSignalFlow;
        document.getElementById('btn-free-signal-back').onclick = () => showView('trader-profile-view'); // –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ó–î–ï–°–¨

        const nextSignalHandler = () => { incrementSignalCount(); prepareFreeSignalView(); };
        document.getElementById('btn-next-signal').onclick = nextSignalHandler;
        document.getElementById('btn-next-from-loss-result').onclick = nextSignalHandler;
        
        document.getElementById('btn-i-lost').onclick = () => showView('loss-analysis-view');
        document.getElementById('btn-loss-analysis-back').onclick = () => showView('signal-active-view');
        
        const goToProfileHandler = () => showView('trader-profile-view');
        document.getElementById('btn-goto-profile-from-win').onclick = goToProfileHandler;
        document.getElementById('btn-goto-profile-from-loss').onclick = goToProfileHandler;

        document.getElementById('btn-pro-tip-ok').onclick = () => { document.getElementById('pro-tip-overlay').style.display = 'none'; showView('post-deposit-view'); };
        document.getElementById('btn-goto-profile').onclick = goToProfileHandler;
        document.getElementById('btn-profile-back').onclick = () => showView('post-deposit-view');
        document.getElementById('rank-container').onclick = (e) => {
            const details = document.getElementById('rank-details');
            const toggleBtn = document.getElementById('rank-toggle-btn');
            toggleBtn.classList.toggle('open');
            details.style.display = details.style.display === 'none' ? 'block' : 'none';
        };
        document.getElementById('btn-trade-vip').onclick = () => showView('wip-view');
        document.getElementById('btn-help').onclick = () => showView('wip-view');
        document.getElementById('btn-onb1-next').onclick = () => showView('onboarding-2-view');
        document.getElementById('btn-tutorial-back').onclick = () => showView('onboarding-1-view');
        document.getElementById('btn-tutorial-ready').onclick = () => showView('onboarding-3-view');
        document.getElementById('btn-step1-back').onclick = () => showView('onboarding-2-view');
        document.getElementById('btn-step1-register').onclick = openRegisterLink;
        document.getElementById('btn-step1-how-to').onclick = () => showView('how-to-register-view');
        document.getElementById('btn-how-to-reg-link').onclick = openRegisterLink;
        document.getElementById('btn-how-to-reg-back').onclick = () => showView('onboarding-3-view');
        document.getElementById('btn-reg-success-next').onclick = () => showView('post-reg-view');
        document.getElementById('btn-step1-have-account').onclick = () => showView('real-money-check-view');
        document.getElementById('btn-real-money-back').onclick = () => showView('onboarding-3-view');
        document.getElementById('btn-real-money-no').onclick = () => showView('new-account-flow-view');
        document.getElementById('btn-new-acc-back').onclick = () => showView('real-money-check-view');
        document.getElementById('btn-how-and-why-delete').onclick = () => showView('how-to-delete-view');
        document.getElementById('btn-new-acc-register').onclick = openRegisterLink;
        document.getElementById('btn-delete-guide-back').onclick = () => showView('new-account-flow-view');
        document.getElementById('btn-real-money-yes').onclick = () => showView('have-money-options-view');
        document.getElementById('btn-options-back').onclick = () => showView('real-money-check-view');
        document.getElementById('btn-how-to-withdraw').onclick = () => showView('wip-view');
        document.getElementById('btn-register-for-friend').onclick = openRegisterLink;
        document.getElementById('btn-risk-what').onclick = () => showView('risk-info-view');
        document.getElementById('btn-risk-info-back').onclick = () => showView('have-money-options-view');
        document.getElementById('btn-make-deposit').onclick = openRegisterLink;
        document.getElementById('btn-how-to-deposit').onclick = () => showView('how-to-deposit-view');
        document.getElementById('btn-how-to-deposit-back').onclick = () => showView('post-reg-view');
        document.getElementById('btn-wip-back').onclick = () => { if (previousViewId) { showView(previousViewId); } else { showView('trader-profile-view'); }};
        document.getElementById('faq-button').onclick = () => showView('wip-view');
    }

    async function fetchAndUpdateView(userId) {
        try {
            const response = await fetch(`/user/${userId}/data`);
            if (!response.ok) throw new Error('Network response was not ok');
            const data = await response.json();
            renderProfileData(data);
            renderRating(data);
            const depositEvent = data.events.find(e => e[0] === 'FTD' || e[0] === 'dep');
            if (depositEvent) { document.getElementById('deposit-amount-display').innerText = `$${parseFloat(depositEvent[1]).toFixed(2)}`; }
            const ftdEvent = data.events.find(e => e[0] === 'FTD');
            const hasDeposit = ftdEvent || data.events.some(e => e[0] === 'dep');
            if (hasDeposit) {
                const proTipSessionKey = `proTipShown_${userId}`;
                if (ftdEvent && !sessionStorage.getItem(proTipSessionKey)) {
                    sessionStorage.setItem(proTipSessionKey, 'true');
                    document.getElementById('pro-tip-overlay').style.display = 'flex';
                } else {
                    const postDepositViews = ['post-deposit-view', 'trader-profile-view', 'rating-view', 'signal-active-view', 'wip-view', 'promocodes-view', 'free-signal-start-view', 'loss-analysis-view', 'how-to-register-view'];
                    if (!postDepositViews.includes(currentViewId)) { showView('post-deposit-view'); }
                }
            } else if (data.is_registered) {
                if(!['post-reg-view', 'how-to-register-view'].includes(currentViewId)) { showView('reg-success-view'); }
            } else {
                const onboardingViews = ['onboarding-1-view', 'onboarding-2-view', 'onboarding-3-view', 'real-money-check-view', 'new-account-flow-view', 'how-to-delete-view', 'have-money-options-view', 'risk-info-view', 'how-to-register-view'];
                if (!onboardingViews.includes(currentViewId)) { showView('onboarding-1-view'); }
            }
        } catch (error) {
            console.error("Data loading error:", error);
            showView('error-view');
        }
    }

    async function main() {
        if (!tg.initDataUnsafe || !tg.initDataUnsafe.user) {
            applyTranslations('en');
            showView('error-view');
            return;
        }
        const user = tg.initDataUnsafe.user;
        userId = user.id;
        userLang = (user.language_code && user.language_code.startsWith('ru')) ? 'ru' : 'en';
        document.documentElement.lang = userLang;
        
        applyTranslations(userLang);
        setupNavigation();
        
        await fetchAndUpdateView(userId);

        const socket = io();
        socket.on('connect', () => {
            console.log('Connected to WebSocket server!');
            socket.emit('join', { 'chat_id': userId });
        });
        socket.on('update_data', (data) => {
            console.log('Received update from server:', data.message);
            tg.HapticFeedback.notificationOccurred('success');
            fetchAndUpdateView(userId);
        });
    }

    document.addEventListener('DOMContentLoaded', main);
</script>

</body>
</html>




